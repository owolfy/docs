"use strict";(self.webpackChunktsoa_docs=self.webpackChunktsoa_docs||[]).push([[456],{8322:(e,n,s)=>{s.r(n),s.d(n,{data:()=>a});const a={key:"v-9449284e",path:"/upgrading.html",title:"Upgrading from tsoa 2.5",lang:"en-US",frontmatter:{sidebarDepth:1},excerpt:"",headers:[{level:2,title:"New Features",slug:"new-features",children:[{level:3,title:"Support for type aliases",slug:"support-for-type-aliases",children:[]},{level:3,title:"Support for mapped types",slug:"support-for-mapped-types",children:[]},{level:3,title:"Support for conditional types",slug:"support-for-conditional-types",children:[]},{level:3,title:"Support for combinations and utility types",slug:"support-for-combinations-and-utility-types",children:[]},{level:3,title:"Support for Record<> #662 (Eywek)`",slug:"support-for-record-662-eywek",children:[]},{level:3,title:"Enums: See #594 for the Spec and #599 and #593",slug:"enums-see-594-for-the-spec-and-599-and-593",children:[]},{level:3,title:"Null Keyword: See #601",slug:"null-keyword-see-601",children:[]},{level:3,title:"Ability to use a colon delimiter instead of bracelets in path #602(itamarco)",slug:"ability-to-use-a-colon-delimiter-instead-of-bracelets-in-path-602-itamarco",children:[]},{level:3,title:"added @example support for parameters / properties #616 (jfrconley)",slug:"added-example-support-for-parameters-properties-616-jfrconley",children:[]},{level:3,title:"feat: ignore class methods #643 (Eywek)",slug:"feat-ignore-class-methods-643-eywek",children:[]},{level:3,title:"feat: handle enum members #656 (Eywek)",slug:"feat-handle-enum-members-656-eywek",children:[]},{level:3,title:"Handle indexed types #636 (Eywek)",slug:"handle-indexed-types-636-eywek",children:[]},{level:3,title:"handle typeof #635 (Eywek)",slug:"handle-typeof-635-eywek",children:[]},{level:3,title:"@format support for type aliases #620 (jfrconley)",slug:"format-support-for-type-aliases-620-jfrconley",children:[]}]},{level:2,title:"Bug Fixes",slug:"bug-fixes",children:[]},{level:2,title:"Breaking changes",slug:"breaking-changes",children:[{level:3,title:"Null vs. undefined",slug:"null-vs-undefined",children:[]},{level:3,title:"Naming",slug:"naming",children:[]},{level:3,title:"Improve nested object validation",slug:"improve-nested-object-validation",children:[]},{level:3,title:"Change default behavior when no host is defined:",slug:"change-default-behavior-when-no-host-is-defined",children:[]},{level:3,title:"Remove .. in fieldErrors",slug:"remove-in-fielderrors",children:[]},{level:3,title:"Use Spec instead of Swagger (tsoa swagger is still available for now, but will be removed eventually) #664 (WoH)",slug:"use-spec-instead-of-swagger-tsoa-swagger-is-still-available-for-now-but-will-be-removed-eventually-664-woh",children:[]},{level:3,title:"TypeScript Unions are now implemented as anyOf in OpenAPI #671",slug:"typescript-unions-are-now-implemented-as-anyof-in-openapi-671",children:[]}]}],filePathRelative:"upgrading.md",git:{updatedTime:1603998716e3,contributors:[{name:"WoH",email:"wolfgang.hobmaier@sensoring.de",commits:5}]}}},6898:(e,n,s)=>{s.r(n),s.d(n,{default:()=>_s});var a=s(6252);const t=(0,a.uE)('<h1 id="upgrading-from-tsoa-2-5" tabindex="-1"><a class="header-anchor" href="#upgrading-from-tsoa-2-5" aria-hidden="true">#</a> Upgrading from tsoa 2.5</h1><p><a href="#breaking-changes">Jump to the breaking changes</a></p><h2 id="new-features" tabindex="-1"><a class="header-anchor" href="#new-features" aria-hidden="true">#</a> New Features</h2><h3 id="support-for-type-aliases" tabindex="-1"><a class="header-anchor" href="#support-for-type-aliases" aria-hidden="true">#</a> Support for type aliases</h3><p>This release comes with proper support for type alias definitions.</p><p>They can range from simple scenarios</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/**\n * A Word shall be a non-empty sting\n * <span class="token keyword">@minLength</span> 1\n */</span>\n<span class="token keyword">type</span> <span class="token class-name">Word</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>to more complex scenarios like unions and intersections of aliases</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IntersectionAlias</span> <span class="token operator">=</span> <span class="token punctuation">{</span> value1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> value2<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> TypeAliasModel1<span class="token punctuation">;</span>\n\n<span class="token comment">// or</span>\n<span class="token keyword">type</span> <span class="token class-name">OneOrTwo</span> <span class="token operator">=</span> TypeAliasModel1 <span class="token operator">|</span> TypeAliasModel2<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>or even generic type aliases:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">GenericAlias<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n<span class="token keyword">type</span> <span class="token class-name">ForwardGenericAlias<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> GenericAlias<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token constant">T</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Please note that this means that tsoa does not only generate the specification (OpenAPI v3 and Swagger2*), but will also validate the input against the types including the jsDoc annotations.</p><p>* There may be certain scenarios where we may not be able to generate Swagger 2 from your TypeScript, tsoa will log warnings to infor you about any issues we are aware of.</p><h3 id="support-for-mapped-types" tabindex="-1"><a class="header-anchor" href="#support-for-mapped-types" aria-hidden="true">#</a> Support for mapped types</h3><blockquote><p>TypeScript 2.1 introduced mapped types, a powerful addition to the type system. In essence, mapped types allow you to create new types from existing ones by mapping over property types. Each property of the existing type is transformed according to a rule that you specify. The transformed properties then make up the new type. - Marius Schulz, https://mariusschulz.com/blog/mapped-types-in-typescript</p></blockquote><p>tsoa now works with the ts type checker to resolve mapped types. We will actively try to support all cases, however the test suite for now only covers the utility mapped types typescript ships with, like:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/**\n * Make all properties in T optional\n */</span>\n<span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * Make all properties in T required\n */</span>\n<span class="token keyword">type</span> <span class="token class-name">Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * Make all properties in T readonly\n */</span>\n<span class="token keyword">type</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * From T, pick a set of properties whose keys are in the union K\n */</span>\n<span class="token keyword">type</span> <span class="token class-name">Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="support-for-conditional-types" tabindex="-1"><a class="header-anchor" href="#support-for-conditional-types" aria-hidden="true">#</a> Support for conditional types</h3>',18),o=(0,a.Uk)("As of version 2.8, TypeScript supports conditional types. The syntax is very close to the ternary operator and enables expression of 2 (or more) different types based on a condition. Please refer to the "),p={href:"https://www.typescriptlang.org/docs/handbook/advanced-types.html#conditional-types",target:"_blank",rel:"noopener noreferrer"},r=(0,a.Uk)("TypeScript Handbook"),l=(0,a.Uk)(" for details."),i=(0,a.uE)('<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Diff<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span> <span class="token comment">// Remove types from T that are assignable to U</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>tsoa now works with the ts type checker to resolve conditional types. We will actively try to support most cases, however the test suite for now only covers the utility types typescript ships with, like:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/**\n * Exclude from T those types that are assignable to U\n */</span>\n<span class="token keyword">type</span> <span class="token class-name">Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * Extract from T those types that are assignable to U\n */</span>\n<span class="token keyword">type</span> <span class="token class-name">Extract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * Exclude null and undefined from T\n */</span>\n<span class="token keyword">type</span> <span class="token class-name">NonNullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">null</span></span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="support-for-combinations-and-utility-types" tabindex="-1"><a class="header-anchor" href="#support-for-combinations-and-utility-types" aria-hidden="true">#</a> Support for combinations and utility types</h3><p>The combination of mapped and conditional types allow for powerful utility types like the <code>Omit</code> type.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/**\n * Construct a type with the properties of T except for those in type K.\n */\ntype Omit&lt;T, K extends keyof any&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>',6),c={id:"support-for-record-662-eywek",tabindex:"-1"},u=(0,a._)("a",{class:"header-anchor",href:"#support-for-record-662-eywek","aria-hidden":"true"},"#",-1),d=(0,a.Uk)(" Support for "),k=(0,a._)("code",null,"Record<>",-1),h=(0,a.Uk)(),m={href:"https://github.com/lukeautry/tsoa/pull/662",target:"_blank",rel:"noopener noreferrer"},b=(0,a.Uk)("#662"),g=(0,a.Uk)(" ("),f={href:"https://github.com/Eywek",target:"_blank",rel:"noopener noreferrer"},y=(0,a.Uk)("Eywek"),w=(0,a.Uk)(")`"),v={id:"enums-see-594-for-the-spec-and-599-and-593",tabindex:"-1"},_=(0,a._)("a",{class:"header-anchor",href:"#enums-see-594-for-the-spec-and-599-and-593","aria-hidden":"true"},"#",-1),U=(0,a.Uk)(" Enums: See "),x={href:"https://github.com/lukeautry/tsoa/pull/594",target:"_blank",rel:"noopener noreferrer"},T=(0,a.Uk)("#594"),W=(0,a.Uk)(" for the Spec and "),S={href:"https://github.com/lukeautry/tsoa/pull/599",target:"_blank",rel:"noopener noreferrer"},E=(0,a.Uk)("#599"),j=(0,a.Uk)(" and "),P={href:"https://github.com/lukeautry/tsoa/pull/593",target:"_blank",rel:"noopener noreferrer"},q=(0,a.Uk)("#593"),A={id:"null-keyword-see-601",tabindex:"-1"},O=(0,a._)("a",{class:"header-anchor",href:"#null-keyword-see-601","aria-hidden":"true"},"#",-1),C=(0,a.Uk)(" Null Keyword: See "),I={href:"https://github.com/lukeautry/tsoa/pull/601",target:"_blank",rel:"noopener noreferrer"},H=(0,a.Uk)("#601"),R={id:"ability-to-use-a-colon-delimiter-instead-of-bracelets-in-path-602-itamarco",tabindex:"-1"},M=(0,a._)("a",{class:"header-anchor",href:"#ability-to-use-a-colon-delimiter-instead-of-bracelets-in-path-602-itamarco","aria-hidden":"true"},"#",-1),N=(0,a.Uk)(" Ability to use a colon delimiter instead of bracelets in path "),F={href:"https://github.com/lukeautry/tsoa/pull/602",target:"_blank",rel:"noopener noreferrer"},K=(0,a.Uk)("#602"),B=(0,a.Uk)("("),D={href:"https://github.com/itamarco",target:"_blank",rel:"noopener noreferrer"},G=(0,a.Uk)("itamarco"),L=(0,a.Uk)(")"),z={id:"added-example-support-for-parameters-properties-616-jfrconley",tabindex:"-1"},V=(0,a._)("a",{class:"header-anchor",href:"#added-example-support-for-parameters-properties-616-jfrconley","aria-hidden":"true"},"#",-1),Z=(0,a.Uk)(" added @example support for parameters / properties "),J={href:"https://github.com/lukeautry/tsoa/pull/616",target:"_blank",rel:"noopener noreferrer"},Y=(0,a.Uk)("#616"),Q=(0,a.Uk)(" ("),X={href:"https://github.com/jfrconley",target:"_blank",rel:"noopener noreferrer"},$=(0,a.Uk)("jfrconley"),ee=(0,a.Uk)(")"),ne={id:"feat-ignore-class-methods-643-eywek",tabindex:"-1"},se=(0,a._)("a",{class:"header-anchor",href:"#feat-ignore-class-methods-643-eywek","aria-hidden":"true"},"#",-1),ae=(0,a.Uk)(" feat: ignore class methods "),te={href:"https://github.com/lukeautry/tsoa/pull/643",target:"_blank",rel:"noopener noreferrer"},oe=(0,a.Uk)("#643"),pe=(0,a.Uk)(" ("),re={href:"https://github.com/Eywek",target:"_blank",rel:"noopener noreferrer"},le=(0,a.Uk)("Eywek"),ie=(0,a.Uk)(")"),ce={id:"feat-handle-enum-members-656-eywek",tabindex:"-1"},ue=(0,a._)("a",{class:"header-anchor",href:"#feat-handle-enum-members-656-eywek","aria-hidden":"true"},"#",-1),de=(0,a.Uk)(" feat: handle enum members "),ke={href:"https://github.com/lukeautry/tsoa/pull/656",target:"_blank",rel:"noopener noreferrer"},he=(0,a.Uk)("#656"),me=(0,a.Uk)(" ("),be={href:"https://github.com/Eywek",target:"_blank",rel:"noopener noreferrer"},ge=(0,a.Uk)("Eywek"),fe=(0,a.Uk)(")"),ye={id:"handle-indexed-types-636-eywek",tabindex:"-1"},we=(0,a._)("a",{class:"header-anchor",href:"#handle-indexed-types-636-eywek","aria-hidden":"true"},"#",-1),ve=(0,a.Uk)(" Handle indexed types "),_e={href:"https://github.com/lukeautry/tsoa/pull/636",target:"_blank",rel:"noopener noreferrer"},Ue=(0,a.Uk)("#636"),xe=(0,a.Uk)(" ("),Te={href:"https://github.com/Eywek",target:"_blank",rel:"noopener noreferrer"},We=(0,a.Uk)("Eywek"),Se=(0,a.Uk)(")"),Ee={id:"handle-typeof-635-eywek",tabindex:"-1"},je=(0,a._)("a",{class:"header-anchor",href:"#handle-typeof-635-eywek","aria-hidden":"true"},"#",-1),Pe=(0,a.Uk)(" handle "),qe=(0,a._)("code",null,"typeof",-1),Ae=(0,a.Uk)(),Oe={href:"https://github.com/lukeautry/tsoa/pull/635",target:"_blank",rel:"noopener noreferrer"},Ce=(0,a.Uk)("#635"),Ie=(0,a.Uk)(" ("),He={href:"https://github.com/Eywek",target:"_blank",rel:"noopener noreferrer"},Re=(0,a.Uk)("Eywek"),Me=(0,a.Uk)(")"),Ne={id:"format-support-for-type-aliases-620-jfrconley",tabindex:"-1"},Fe=(0,a._)("a",{class:"header-anchor",href:"#format-support-for-type-aliases-620-jfrconley","aria-hidden":"true"},"#",-1),Ke=(0,a.Uk)(),Be=(0,a._)("code",null,"@format",-1),De=(0,a.Uk)(" support for type aliases "),Ge={href:"https://github.com/lukeautry/tsoa/pull/620",target:"_blank",rel:"noopener noreferrer"},Le=(0,a.Uk)("#620"),ze=(0,a.Uk)(" ("),Ve={href:"https://github.com/jfrconley",target:"_blank",rel:"noopener noreferrer"},Ze=(0,a.Uk)("jfrconley"),Je=(0,a.Uk)(")"),Ye=(0,a._)("h2",{id:"bug-fixes",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#bug-fixes","aria-hidden":"true"},"#"),(0,a.Uk)(" Bug Fixes")],-1),Qe=(0,a.Uk)("correctly propagate field name in validateModel "),Xe={href:"https://github.com/fantapop",target:"_blank",rel:"noopener noreferrer"},$e=(0,a.Uk)("@fantapop"),en=(0,a.Uk)("Aliased void Api Response types document 200 response instead of 204 "),nn={href:"https://github.com/lukeautry/tsoa/pull/629",target:"_blank",rel:"noopener noreferrer"},sn=(0,a.Uk)("#629"),an=(0,a.Uk)(" ("),tn={href:"https://github.com/WoH",target:"_blank",rel:"noopener noreferrer"},on=(0,a.Uk)("WoH"),pn=(0,a.Uk)(")"),rn=(0,a.Uk)("ValidateError should extend Error "),ln={href:"https://github.com/lukeautry/tsoa/pull/661",target:"_blank",rel:"noopener noreferrer"},cn=(0,a.Uk)("#661"),un=(0,a.Uk)(" ("),dn={href:"https://github.com/aldenquimby",target:"_blank",rel:"noopener noreferrer"},kn=(0,a.Uk)("aldenquimby"),hn=(0,a.Uk)(")"),mn=(0,a.Uk)("Upgrade koa-router to @koa/router, fix type errors "),bn={href:"https://github.com/lukeautry/tsoa/pull/646",target:"_blank",rel:"noopener noreferrer"},gn=(0,a.Uk)("#646"),fn=(0,a.Uk)(" ("),yn={href:"https://github.com/michaelbeaumont",target:"_blank",rel:"noopener noreferrer"},wn=(0,a.Uk)("michaelbeaumont"),vn=(0,a.Uk)(")"),_n=(0,a.Uk)("Remove object type "),Un={href:"https://github.com/lukeautry/tsoa/pull/642",target:"_blank",rel:"noopener noreferrer"},xn=(0,a.Uk)("#642"),Tn=(0,a.Uk)(" ("),Wn={href:"https://github.com/dimitor115",target:"_blank",rel:"noopener noreferrer"},Sn=(0,a.Uk)("dimitor115"),En=(0,a.Uk)(")"),jn=(0,a.Uk)("Fix adding static properties to model definition "),Pn={href:"https://github.com/lukeautry/tsoa/pull/639",target:"_blank",rel:"noopener noreferrer"},qn=(0,a.Uk)("#639"),An=(0,a.Uk)(" ("),On={href:"https://github.com/dimitor115",target:"_blank",rel:"noopener noreferrer"},Cn=(0,a.Uk)("dimitor115"),In=(0,a.Uk)(")"),Hn=(0,a.uE)('<h2 id="breaking-changes" tabindex="-1"><a class="header-anchor" href="#breaking-changes" aria-hidden="true">#</a> Breaking changes</h2><h3 id="null-vs-undefined" tabindex="-1"><a class="header-anchor" href="#null-vs-undefined" aria-hidden="true">#</a> Null vs. undefined</h3><p>Unless you declare a type to accept <code>null</code>, we will no longer mark your optional properties as <code>nullable: true</code> or <code>x-nullable: true</code>. This applies to validation aswell, so while sending <code>null</code> instead of sending <code>undefined</code> / no properties on an object was fine, now it&#39;s not any more. Sending <code>undefined</code> instead of, i.e. <code>string | null</code> is also rejected by the validation.</p><h3 id="naming" tabindex="-1"><a class="header-anchor" href="#naming" aria-hidden="true">#</a> Naming</h3><p>In order to support type aliases and avoid name clashes, the names for the generated component schemas / definitions may have changed (generic interfaces are affected mostly). If you rely on the component names generated from tsoa, this is a breaking change.</p><p>Because tsoa supported some type aliases in the past and now generated definitions differently, this may break your code. If you relied on tsoa not supporting type aliases properly to avoid issues, this may break your code. Proceed with caution and report issues.</p><h3 id="improve-nested-object-validation" tabindex="-1"><a class="header-anchor" href="#improve-nested-object-validation" aria-hidden="true">#</a> Improve nested object validation</h3>',7),Rn=(0,a.Uk)("See "),Mn={href:"https://github.com/lukeautry/tsoa/pull/574",target:"_blank",rel:"noopener noreferrer"},Nn=(0,a.Uk)("#574"),Fn=(0,a.Uk)(" and "),Kn={href:"https://github.com/lukeautry/tsoa/pull/575",target:"_blank",rel:"noopener noreferrer"},Bn=(0,a.Uk)("#575"),Dn=(0,a.Uk)(". These SHOULD not be breaking changes, but since it affects validation, better safe than sorry."),Gn=(0,a.uE)('<h3 id="change-default-behavior-when-no-host-is-defined" tabindex="-1"><a class="header-anchor" href="#change-default-behavior-when-no-host-is-defined" aria-hidden="true">#</a> Change default behavior when no host is defined:</h3><p>Explicitly set your host in case you want to have absolute urls. This is a breaking change for those who were using OpenAPI 3, but it actually brings tsoa into parity with how we were handling the <code>host</code> property in Swagger 2. Previously OpenAPI 3 users had to result to passing <code>null</code> which we all felt was strange. Now omitting <code>host</code> will cause tsoa to assume the url should be relative.</p><h3 id="remove-in-fielderrors" tabindex="-1"><a class="header-anchor" href="#remove-in-fielderrors" aria-hidden="true">#</a> Remove .. in fieldErrors</h3><p>When detecting illegal additional properties (if you are using tsoa setting <code>additionalProperties: &#39;throw-on-extras&#39;</code>), the key on the error would contain an additional dot.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n  &quot;TestModel<span class="token punctuation">.</span><span class="token punctuation">.</span>additionalProp<span class="token operator">:</span> <span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token operator">...</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>This is now fixed and the key is <code>TestModel.additionalProp</code>.</p>',6),Ln={id:"use-spec-instead-of-swagger-tsoa-swagger-is-still-available-for-now-but-will-be-removed-eventually-664-woh",tabindex:"-1"},zn=(0,a._)("a",{class:"header-anchor",href:"#use-spec-instead-of-swagger-tsoa-swagger-is-still-available-for-now-but-will-be-removed-eventually-664-woh","aria-hidden":"true"},"#",-1),Vn=(0,a.Uk)(" Use Spec instead of Swagger ("),Zn=(0,a._)("code",null,"tsoa swagger",-1),Jn=(0,a.Uk)(" is still available for now, but will be removed eventually) "),Yn={href:"https://github.com/lukeautry/tsoa/pull/664",target:"_blank",rel:"noopener noreferrer"},Qn=(0,a.Uk)("#664"),Xn=(0,a.Uk)(" ("),$n={href:"https://github.com/WoH",target:"_blank",rel:"noopener noreferrer"},es=(0,a.Uk)("WoH"),ns=(0,a.Uk)(")"),ss=(0,a.uE)('<div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code>Calling the tsoa command\n<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> tsoa swagger\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> tsoa spec\n</span></span>\n<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> tsoa swagger-and-routes\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> tsoa spec-and-routes\n</span></span>\nManually calling spec generation\n<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> await generateSwaggerSpec(swaggerConfig, routesConfig, compilerOptions, config.ignore);\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> await generateSpec(openapiConfig, compilerOptions, config.ignore);\n</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>tsoa.json:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n  <span class="token string">&quot;swagger&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>becomes</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n  <span class="token string">&quot;spec&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',5),as=(0,a.Uk)("Move shared config to top level "),ts={href:"https://github.com/lukeautry/tsoa/pull/628",target:"_blank",rel:"noopener noreferrer"},os=(0,a.Uk)("#628"),ps=(0,a.Uk)(" ("),rs={href:"https://github.com/WoH",target:"_blank",rel:"noopener noreferrer"},ls=(0,a.Uk)("WoH"),is=(0,a.Uk)(")"),cs=(0,a.uE)('<p>Instead of duplicating config and handling a lot of edge cases, the new config is a lot simpler. Config settings, that impact both routes and spec are now located at the top level of the config object.</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;entryFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./tests/fixtures/express/server.ts&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;noImplicitAdditionalProperties&quot;</span><span class="token operator">:</span> <span class="token string">&quot;silently-remove-extras&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;routes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;spec&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>This means if your settings are different (for example the entry file), you&#39;ll have to call the <code>generateRoutes()</code> and <code>generateSpec()</code> yourself. Note that these methods now have a simpler config aswell:</p><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    await generateSwaggerSpec(swaggerConfig, routesConfig, compilerOptions, config.ignore);\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    await generateSpec(openapiConfig, compilerOptions, config.ignore);\n</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    await generateRoutes(routesConfig, swaggerConfig, compilerOptions, config.ignore);\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    await generateRoutes(routesConfig, compilerOptions, config.ignore);\n</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>EntryFile and noImplicitAdditionalProperties can now be set on the swagger/routesConfig.</p><p>Also, boolean settings for noImplicitAdditionalProperties have been removed: #503 Valid settings are now: <code>&#39;throw-on-extras&#39; | &#39;silently-remove-extras&#39; | &#39;ignore&#39;</code>, everything else falls back to <code>&#39;ignore&#39;</code>.</p>',7),us=(0,a.Uk)("For reference, see the TS interface of the entire config "),ds={href:"https://tsoa-community.github.io/reference/interfaces/_tsoa_runtime.config-1.html",target:"_blank",rel:"noopener noreferrer"},ks=(0,a.Uk)("here"),hs={id:"typescript-unions-are-now-implemented-as-anyof-in-openapi-671",tabindex:"-1"},ms=(0,a._)("a",{class:"header-anchor",href:"#typescript-unions-are-now-implemented-as-anyof-in-openapi-671","aria-hidden":"true"},"#",-1),bs=(0,a.Uk)(" TypeScript Unions are now implemented as "),gs=(0,a._)("code",null,"anyOf",-1),fs=(0,a.Uk)(" in OpenAPI "),ys={href:"https://github.com/lukeautry/tsoa/issues/671",target:"_blank",rel:"noopener noreferrer"},ws=(0,a.Uk)("#671"),vs={},_s=(0,s(3744).Z)(vs,[["render",function(e,n){const s=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[t,(0,a._)("p",null,[o,(0,a._)("a",p,[r,(0,a.Wm)(s)]),l]),i,(0,a._)("h3",c,[u,d,k,h,(0,a._)("a",m,[b,(0,a.Wm)(s)]),g,(0,a._)("a",f,[y,(0,a.Wm)(s)]),w]),(0,a._)("h3",v,[_,U,(0,a._)("a",x,[T,(0,a.Wm)(s)]),W,(0,a._)("a",S,[E,(0,a.Wm)(s)]),j,(0,a._)("a",P,[q,(0,a.Wm)(s)])]),(0,a._)("h3",A,[O,C,(0,a._)("a",I,[H,(0,a.Wm)(s)])]),(0,a._)("h3",R,[M,N,(0,a._)("a",F,[K,(0,a.Wm)(s)]),B,(0,a._)("a",D,[G,(0,a.Wm)(s)]),L]),(0,a._)("h3",z,[V,Z,(0,a._)("a",J,[Y,(0,a.Wm)(s)]),Q,(0,a._)("a",X,[$,(0,a.Wm)(s)]),ee]),(0,a._)("h3",ne,[se,ae,(0,a._)("a",te,[oe,(0,a.Wm)(s)]),pe,(0,a._)("a",re,[le,(0,a.Wm)(s)]),ie]),(0,a._)("h3",ce,[ue,de,(0,a._)("a",ke,[he,(0,a.Wm)(s)]),me,(0,a._)("a",be,[ge,(0,a.Wm)(s)]),fe]),(0,a._)("h3",ye,[we,ve,(0,a._)("a",_e,[Ue,(0,a.Wm)(s)]),xe,(0,a._)("a",Te,[We,(0,a.Wm)(s)]),Se]),(0,a._)("h3",Ee,[je,Pe,qe,Ae,(0,a._)("a",Oe,[Ce,(0,a.Wm)(s)]),Ie,(0,a._)("a",He,[Re,(0,a.Wm)(s)]),Me]),(0,a._)("h3",Ne,[Fe,Ke,Be,De,(0,a._)("a",Ge,[Le,(0,a.Wm)(s)]),ze,(0,a._)("a",Ve,[Ze,(0,a.Wm)(s)]),Je]),Ye,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("p",null,[Qe,(0,a._)("a",Xe,[$e,(0,a.Wm)(s)])])]),(0,a._)("li",null,[(0,a._)("p",null,[en,(0,a._)("a",nn,[sn,(0,a.Wm)(s)]),an,(0,a._)("a",tn,[on,(0,a.Wm)(s)]),pn])]),(0,a._)("li",null,[(0,a._)("p",null,[rn,(0,a._)("a",ln,[cn,(0,a.Wm)(s)]),un,(0,a._)("a",dn,[kn,(0,a.Wm)(s)]),hn])]),(0,a._)("li",null,[(0,a._)("p",null,[mn,(0,a._)("a",bn,[gn,(0,a.Wm)(s)]),fn,(0,a._)("a",yn,[wn,(0,a.Wm)(s)]),vn])]),(0,a._)("li",null,[(0,a._)("p",null,[_n,(0,a._)("a",Un,[xn,(0,a.Wm)(s)]),Tn,(0,a._)("a",Wn,[Sn,(0,a.Wm)(s)]),En])]),(0,a._)("li",null,[(0,a._)("p",null,[jn,(0,a._)("a",Pn,[qn,(0,a.Wm)(s)]),An,(0,a._)("a",On,[Cn,(0,a.Wm)(s)]),In])])]),Hn,(0,a._)("p",null,[Rn,(0,a._)("a",Mn,[Nn,(0,a.Wm)(s)]),Fn,(0,a._)("a",Kn,[Bn,(0,a.Wm)(s)]),Dn]),Gn,(0,a._)("h3",Ln,[zn,Vn,Zn,Jn,(0,a._)("a",Yn,[Qn,(0,a.Wm)(s)]),Xn,(0,a._)("a",$n,[es,(0,a.Wm)(s)]),ns]),ss,(0,a._)("ul",null,[(0,a._)("li",null,[as,(0,a._)("a",ts,[os,(0,a.Wm)(s)]),ps,(0,a._)("a",rs,[ls,(0,a.Wm)(s)]),is])]),cs,(0,a._)("p",null,[(0,a._)("strong",null,[us,(0,a._)("a",ds,[ks,(0,a.Wm)(s)])])]),(0,a._)("h3",hs,[ms,bs,gs,fs,(0,a._)("a",ys,[ws,(0,a.Wm)(s)])])],64)}]])},3744:(e,n)=>{n.Z=(e,n)=>{for(const[s,a]of n)e[s]=a;return e}}}]);